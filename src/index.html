<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Enigma</title>
  <base href="/">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/x-icon" href="./favicon.ico">
  <link id="site-manifest" rel="manifest" href="./manifest.dark.json">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/enigma-16-dark.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/enigma-32-dark.png">
  <link rel="icon" type="image/png" sizes="57x57" href="/icons/enigma-57-dark.png">
  <link rel="icon" type="image/png" sizes="60x60" href="/icons/enigma-60-dark.png">
  <link rel="icon" type="image/png" sizes="70x70" href="/icons/enigma-70-dark.png">
  <link rel="icon" type="image/png" sizes="72x72" href="/icons/enigma-72-dark.png">
  <link rel="icon" type="image/png" sizes="76x76" href="/icons/enigma-76-dark.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/enigma-96-dark.png">
  <meta name="theme-color" content="#ffffff" media="(prefers-color-scheme: light)">
  <meta name="theme-color" content="#000000" media="(prefers-color-scheme: dark)">

  <script>
    (function() {
      const sizes = [16,32,57,60,70,72,76,96];
      const mq = window.matchMedia('(prefers-color-scheme: dark)');
      const manifestLink = document.getElementById('site-manifest');

      function applyIcons(mode) {
        document.querySelectorAll('link[rel="icon"]').forEach(n => n.remove());

        sizes.forEach(size => {
          const link = document.createElement('link');
          link.rel = 'icon';
          link.type = 'image/png';
          link.sizes = size + 'x' + size;
          link.href = `./icons/enigma-${size}-${mode}.png`;
          document.head.appendChild(link);
        });

        manifestLink.href = `./manifest.${mode}.json`;
      }

      function setScheme(isDark) {
        applyIcons(isDark ? 'light' : 'dark');
      }

      setScheme(mq.matches);

      if (mq.addEventListener) {
        mq.addEventListener('change', e => setScheme(e.matches));
      } else if (mq.addListener) {
        mq.addListener(e => setScheme(e.matches));
      }
    })();
  </script>
</head>
<body>
  <app-root></app-root>
  <noscript>Please enable JavaScript to continue using this application.</noscript>
</body>
</html>
